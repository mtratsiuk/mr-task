!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n||self).mrEmailsInput={})}(this,function(n){function e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function t(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}function r(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,i(n,e)}function i(n,e){return(i=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function o(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function u(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return o(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=n[Symbol.iterator]()).next.bind(t)}var a="",l=!1;function s(n){a+=n}var d=function(){function n(){this.ref=new c}var e=n.prototype;return e.render=function(n,e){void 0===e&&(e="beforeend");var t=this.view().split("\n").map(function(n){return n.trim()}).filter(Boolean).join(" ");n.insertAdjacentHTML(e,t),this.mount()},e.mount=function(){this.ref.mount(),this.onMount()},e.unmount=function(){this.onUnmount()},e.remove=function(){var n,e;this.unmount(),null==(n=this.ref.current)||null==(e=n.parentElement)||e.removeChild(this.ref.current)},n}(),c=function(){function n(){this.id=void 0,this.current=void 0,this.id=null,this.current=null}var e=n.prototype;return e.create=function(){return this.id=(f+=1)+"."+(1e3*Math.random()>>>0),'data-mr-ref="'+this.id+'"'},e.mount=function(){if(!this.id)throw new Error("Cannot mount ref. Make sure to call `ref.create()` first");this.current=document.querySelector('[data-mr-ref="'+this.id+'"]')},n}(),f=100*Math.random()>>>0,m=/^[^\s]+@[^\s]+$/;function v(){}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},p=/[&<>"']/g,b="mr-email-label__remove",_=function(n){function e(e){var t,r=e.value,i=e.onRemove,o=void 0===i?v:i;return(t=n.call(this)||this)._value=void 0,t._onRemove=void 0,t._buttonRemove=void 0,t._handleRemove=function(){t._onRemove(function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t))},t._value=r,t._onRemove=o,t}r(e,n);var i=e.prototype;return i.onMount=function(){var n,e;this._buttonRemove=null==(n=this.ref.current)?void 0:n.querySelector("button"),null==(e=this._buttonRemove)||e.addEventListener("click",this._handleRemove)},i.onUnmount=function(){var n;null==(n=this._buttonRemove)||n.removeEventListener("click",this._handleRemove)},i.view=function(){return"\n            <div\n                "+this.ref.create()+'\n                class="mr-email-label '+(this.isValid?"":"mr-email-label--invalid")+'"\n            >\n                <div>'+((n=this.value)&&n.replace(p,function(n){return h[n]}))+'</div>\n                <button\n                    class="'+b+'"\n                    aria-label="remove"\n                >\n                  <svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.8L7.2 0L4 3.2L0.8 0L0 0.8L3.2 4L0 7.2L0.8 8L4 4.8L7.2 8L8 7.2L4.8 4L8 0.8Z" fill="#050038"/></svg>\n                </button>\n            </div>\n        ';var n},t(e,[{key:"value",get:function(){return this._value}},{key:"isValid",get:function(){return m.test(this.value)}}]),e}(d);s("\n    .mr-email-label {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: 25px;\n        padding: 5px 9px;\n\n        background-color: rgba(102, 153, 255, 0.2);\n        border-radius: 100px;\n    }\n\n    .mr-email-label--invalid {\n        background-color: #FFFFFF;\n        border-bottom: 1px dashed #D92929;\n        border-radius: 0px;\n        padding: 5px 0px;\n    }\n\n    ."+b+" {\n        display: block;\n\n        padding: 3px 3px 3px 8px;\n\n        background: transparent;\n        border: none;\n        outline: none;\n        cursor: pointer;\n        transition: transform 0.2s;\n    }\n\n    ."+b+":focus {\n        transform: scale(1.3);\n    }\n");var y=[{key:"Enter",code:13}],g=[","],x=new RegExp("["+g.join("")+"]"),w=function(n){function e(e){var t,r=e.onSubmit,i=void 0===r?v:r;return(t=n.call(this)||this)._onSubmit=void 0,t._handlePaste=function(n){n.preventDefault();var e=function(n){var e,t;return null==(e=n.clipboardData||(null==(t=window)?void 0:t.clipboardData))?void 0:e.getData("text")}(n);e&&t._submit(e.split(x))},t._handleInput=function(){var n=t.value;if(n){var e=n[n.length-1];g.some(function(n){return e===n})&&t._submit(n.slice(0,n.length-1))}},t._handleBlur=function(){t._submit(t.value)},t._handleKeydown=function(n){y.some(function(e){return function(n,e){return n.key===e.key||n.keyCode===e.code}(n,e)})&&t._submit(t.value)},t._onSubmit=i,t}r(e,n);var i=e.prototype;return i.onMount=function(){var n,e,t,r;null==(n=this.ref.current)||n.addEventListener("paste",this._handlePaste),null==(e=this.ref.current)||e.addEventListener("input",this._handleInput),null==(t=this.ref.current)||t.addEventListener("blur",this._handleBlur),null==(r=this.ref.current)||r.addEventListener("keydown",this._handleKeydown)},i.onUnmount=function(){var n,e,t,r;null==(n=this.ref.current)||n.removeEventListener("paste",this._handlePaste),null==(e=this.ref.current)||e.removeEventListener("input",this._handleInput),null==(t=this.ref.current)||t.removeEventListener("blur",this._handleBlur),null==(r=this.ref.current)||r.removeEventListener("keydown",this._handleKeydown)},i._submit=function(n){if(this.ref.current&&(this.ref.current.value=""),n)for(var e,t=u((Array.isArray(n)?n:[n]).map(function(n){return n.trim()}).filter(Boolean));!(e=t()).done;)this._onSubmit(e.value)},i.view=function(){return"\n            <input\n              "+this.ref.create()+'\n              type="text"\n              placeholder="add more peopleâ€¦"\n              class="mr-email-editor"\n            />\n        '},t(e,[{key:"value",get:function(){var n;return null==(n=this.ref.current)?void 0:n.value}}]),e}(d);s("\n    .mr-email-editor {\n        display: block;\n        height: 25px;\n        min-width: 220px;\n        padding: 5px 9px;\n\n        background-color: #FFFFFF;\n        border: none;\n        outline: none;\n    }\n\n    .mr-email-editor::placeholder {\n        color: #C3C2CF\n    }\n");var E=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))||this)._handleEmailSubmit=function(n){e.addEmail(n)},e._handleEmailRemove=function(n){e._removeLabel(n)},e._editor=new w({onSubmit:e._handleEmailSubmit}),e._labels=[],e}r(e,n);var i=e.prototype;return i.addEmail=function(n){var e=this._editor.ref.current;if(!e)throw new Error("Cannot render `EmailLabel:` `EmailEditor` is not found");var t=new _({value:n,onRemove:this._handleEmailRemove});t.render(e,"beforebegin"),this._labels.push(t)},i.removeEmail=function(n){for(var e,t=u(this._labels);!(e=t()).done;){var r=e.value;r.value===n&&this._removeLabel(r)}},i.onMount=function(){this._editor.mount()},i.onUnmount=function(){this._editor.unmount();for(var n,e=u(this._labels);!(n=e()).done;)n.value.unmount()},i._removeLabel=function(n){this._labels=this._labels.filter(function(e){return e!==n}),n.remove()},i.view=function(){return"\n            <div\n                "+this.ref.create()+'\n                class="mr-emails-input"\n            >\n                '+this._editor.view()+"\n            </div>\n        "},t(e,[{key:"value",get:function(){return this._labels.map(function(n){return n.value})}},{key:"state",get:function(){return this._labels.map(function(n){return{value:n.value,isValid:n.isValid}})}}]),e}(d);s("\n    .mr-emails-input {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: flex-start;\n        align-content: flex-start;\n\n        width: 100%;\n        height: 100%;\n        padding: 8px;\n\n        overflow-y: auto;\n\n        background: #FFFFFF;\n        border: 1px solid #C3C2CF;\n        box-sizing: border-box;\n        border-radius: 4px;\n\n        font-size: 14px;\n    }\n\n    .mr-emails-input *,\n    .mr-emails-input *::before,\n    .mr-emails-input *::after, {\n        box-sizing: inherit;\n    }\n\n    .mr-emails-input > * {\n        margin-bottom: 4px;\n    }\n\n    .mr-emails-input > :not(:last-child) {\n        margin-right: 8px;\n\n        flex: 0 0 auto;\n    }\n\n    .mr-emails-input > :last-child {\n        flex: 1 0 auto;\n    }\n");var L=function(){function n(n){this._input=void 0,function(){if(!l){l=!0;var n=document.head,e=document.createElement("style");n.appendChild(e),e.appendChild(document.createTextNode(a))}}(),this._input=new E,this._input.render(n)}var e=n.prototype;return e.getAll=function(){return this._input.value},e.getValid=function(){return this._input.state.filter(function(n){return n.isValid}).map(function(n){return n.value})},e.add=function(n){this._input.addEmail(n)},e.remove=function(n){this._input.removeEmail(n)},e.destroy=function(){this._input.remove()},t(n,[{key:"value",get:function(){return this.getAll()}}]),n}();n.render=function(n){return new L(n)}});
//# sourceMappingURL=emails-input.umd.js.map
